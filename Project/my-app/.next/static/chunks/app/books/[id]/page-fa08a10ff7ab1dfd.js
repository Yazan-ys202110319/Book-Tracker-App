(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{1001:(e,t,o)=>{Promise.resolve().then(o.bind(o,9700)),Promise.resolve().then(o.t.bind(o,8173,23))},9700:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});var a=o(5155),r=o(2115);function n(e){let{book:t}=e,[o,n]=(0,r.useState)(!1),[l,s]=(0,r.useState)(t.name),[c,i]=(0,r.useState)(t.author),[d,u]=(0,r.useState)(t.description||""),[h,b]=(0,r.useState)(!1);async function p(e){e.preventDefault();try{let e=await fetch("/api/books/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,author:c,description:d}),cache:"no-store"});if(e.ok)n(!1),window.location.reload();else{let t=await e.json();alert("Failed to update book: ".concat(t.error||"Unknown error"))}}catch(e){console.error("Failed to update book:",e),alert("Error: ".concat(e.message))}}async function m(){if(confirm("Are you sure you want to delete this book?")){b(!0);try{let e=await fetch("/api/books/".concat(t.id),{method:"DELETE",cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(e.ok){let e=new Date().getTime();window.location.href="/?t=".concat(e)}else{let t=await e.json();alert("Failed to delete book: ".concat(t.error||"Unknown error")),b(!1)}}catch(e){console.error("Error deleting book:",e),alert("Error: ".concat(e.message)),b(!1)}}}return(0,a.jsx)(a.Fragment,{children:o?(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Edit Book"}),(0,a.jsx)("input",{className:"w-full text-black p-2 border rounded",value:l,onChange:e=>s(e.target.value),placeholder:"Book Title"}),(0,a.jsx)("input",{className:"w-full text-black p-2 border rounded",value:c,onChange:e=>i(e.target.value),placeholder:"Author"}),(0,a.jsx)("textarea",{className:"w-full text-black p-2 border rounded",value:d,onChange:e=>u(e.target.value),rows:4,placeholder:"Description"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Save Changes"}),(0,a.jsx)("button",{type:"button",className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",onClick:()=>n(!1),children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"flex gap-3 pt-6",children:[(0,a.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md",onClick:()=>n(!0),children:"Edit Book"}),(0,a.jsx)("button",{className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md",onClick:m,disabled:h,children:h?"Deleting...":"Delete Book"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,441,517,358],()=>t(1001)),_N_E=e.O()}]);